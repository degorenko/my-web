#{extends 'main.html' /}
#{set title:'Chart' /}

<h1>${dbs}</h1>
<h1>${collections}</h1>
<h1>${fields}</h1>
<canvas id="canvas"></canvas>
<script>

    var data1 = {
        labels : ["", "", ""],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0)",
                strokeColor : "rgba(220,220,220,0)",
                data : [0,0,0]
            },
            {
                fillColor : "rgba(200,100,200,0.5)",
                strokeColor : "rgba(180,180,180,1)",
                data : [2,1,3]
            }
        ]
    };

    $(function(){
        $.get("/getData", {"dbs": '${dbs}', "collections": '${collections}',
            "fields": '${fields}' }, function(data) {
            data1.labels = data[0];
            data1.datasets[1].data = data[1];
        })
    });

    var myRadar = new Chart(document.getElementById("canvas").getContext("2d")).Bar(data1,
            {
                scaleShowLabels : true,
                pointLabelFontSize : 18,
                scaleFontSize : 18
            });
</script>